const User=require(`../models/user`);


module.exports.signin=function(req,res){

    return res.render(`signin`);
}

module.exports.signup=function(req,res){

    return res.render(`signup`);
}

module.exports.create_user=async (req,res)=>{

try {
    
    if(req.body.password!=req.body.c_password){
        
        req.flash(`error`,`Password not matches`);  
        return res.redirect(`back`);
    }
    let user=await User.findOne({email:req.body.email});
    if(user){
        req.flash(`error`,`user already exist`);
        return res.redirect(`back`);
    }

    await User.create({
        name:req.body.name,
        email:req.body.email,
        password:req.body.email
    });
      
    req.flash(`success`,`Account created successfully`);
    res.redirect(`/users/signin`);
    
} catch (error) {
    
    if(error){
        console.log(`error in signing-up`,error);
    }
}


}



